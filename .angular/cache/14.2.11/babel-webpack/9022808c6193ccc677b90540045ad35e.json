{"ast":null,"code":"import { FormControl, Validators } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/authorization.service\";\nimport * as i2 from \"src/app/services/app-logs.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/router\";\nexport class LoginComponent {\n  constructor(service, appLogsService, formBuilder, navigationApp) {\n    var _a, _b, _c;\n\n    this.service = service;\n    this.appLogsService = appLogsService;\n    this.formBuilder = formBuilder;\n    this.navigationApp = navigationApp;\n    this.payload = [];\n    this.loginForm = this.formBuilder.group({\n      usernameInput: new FormControl(\"\", Validators.required),\n      passwordInput: new FormControl(\"\", Validators.required)\n    });\n    this.credentials = {\n      password: '',\n      username: ''\n    };\n    const dateSys = new Date();\n    this.appLogsNew = {\n      eventType: \"Autenticacion\",\n      eventDescription: \"Intento de autenticacion en el app administrador por: \" + ((_a = this.loginForm.get('usernameInput')) === null || _a === void 0 ? void 0 : _a.value),\n      eventDate: `Year: ${dateSys.getDay}`\n    };\n    async;\n    GenerateAuth();\n    {\n      this.appLogsService.PostAppLogs(this.appLogsNew).subscribe(result => {\n        console.log(result);\n      });\n      this.credentials = {\n        username: (_b = this.loginForm.get('usernameInput')) === null || _b === void 0 ? void 0 : _b.value,\n        password: (_c = this.loginForm.get('passwordInput')) === null || _c === void 0 ? void 0 : _c.value\n      };\n      this.service.PostAuthorization(this.credentials).subscribe(result => {\n        this.payload.pop();\n        this.payload.push(result);\n        localStorage.setItem('payload', JSON.stringify(this.payload));\n\n        switch (this.payload[0].jwt) {\n          case \"USER NOT FOUND\":\n            alert(\"THIS USER WAS NOT FOUND OR YOU ENTER BAD CREDENTIALS! PLEASE TRY AGAIN\");\n            break;\n\n          case \"NO AUTHORIZED\":\n            alert(\"BAD CREDENTIALS OR USER ACCOUNT INACTIVE, PLEASE TRY AGAIN\");\n            break;\n\n          default:\n            this.navigationApp.navigateByUrl('/Profile');\n        }\n      }, error => {\n        alert(error.error.error.message);\n      });\n    }\n    ngOnInit();\n    void {};\n  }\n\n}\n\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthorizationService), i0.ɵɵdirectiveInject(i2.AppLogsService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.Router));\n};\n\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 18,\n  vars: 2,\n  consts: [[1, \"container\", \"bg-dark\"], [1, \"row\", \"justify-content-center\", \"align-items-center\", \"vh-100\"], [1, \"col-md-4\"], [1, \"card\"], [1, \"card-body\"], [1, \"card-title\", \"mb-4\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"mb-3\"], [\"for\", \"username\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"username\", \"name\", \"username\", \"placeholder\", \"Enter Username\", \"formControlName\", \"usernameInput\", \"required\", \"true\", 1, \"form-control\"], [\"for\", \"password\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"placeholder\", \"Enter Password\", \"formControlName\", \"passwordInput\", \"required\", \"true\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h5\", 5);\n      i0.ɵɵtext(6, \"Iniciar Sesi\\u00F3n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"form\", 6);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_7_listener() {\n        return ctx.GenerateAuth();\n      });\n      i0.ɵɵelementStart(8, \"div\", 7)(9, \"label\", 8);\n      i0.ɵɵtext(10, \"Nombre de usuario\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(11, \"input\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"div\", 7)(13, \"label\", 10);\n      i0.ɵɵtext(14, \"Contrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(15, \"input\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"button\", 12);\n      i0.ɵɵtext(17, \" Iniciar sesi\\u00F3n \");\n      i0.ɵɵelementEnd()()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"disabled\", ctx.loginForm.invalid);\n    }\n  },\n  dependencies: [i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.FormGroupDirective, i3.FormControlName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJsb2dpbi5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","Validators","LoginComponent","constructor","service","appLogsService","formBuilder","navigationApp","loginForm","group","usernameInput","required","passwordInput","credentials","password","username","dateSys","Date","appLogsNew","eventType","eventDescription","get","_a","value","eventDate","getDay","async","GenerateAuth","PostAppLogs","subscribe","result","console","log","_b","_c","PostAuthorization","payload","pop","push","localStorage","setItem","JSON","stringify","jwt","alert","navigateByUrl","error","message","ngOnInit","i0","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/home/claudiopcwork/Desktop/Desarrollo FULLSTACK/Tienda Electronica/tienda-electronica-admin/src/app/components/UserAccountsComponents/login/login.component.ts","/home/claudiopcwork/Desktop/Desarrollo FULLSTACK/Tienda Electronica/tienda-electronica-admin/src/app/components/UserAccountsComponents/login/login.component.html"],"sourcesContent":["import { HttpErrorResponse } from \"@angular/common/http\";\nimport { Component, OnInit  } from \"@angular/core\";\n\nimport {\n  FormBuilder,\n  FormControl,\n  FormGroup,\n  Validators,\n} from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\nimport { IAppLogs } from \"src/app/interfaces/AppLogs\";\nimport { IAuthorization } from \"src/app/interfaces/Authorization\";\nimport { IUserAccounts } from \"src/app/interfaces/UserAccounts\";\nimport { AppLogsService } from \"src/app/services/app-logs.service\";\nimport { AuthorizationService } from \"src/app/services/authorization.service\";\n@Component({\n  selector: \"app-login\",\n  templateUrl: \"./login.component.html\",\n  styleUrls: [\"./login.component.css\"],\n})\nexport class LoginComponent implements OnInit {\n \n\n  loginForm: FormGroup;\n  credentials: IAuthorization;\n  payload:IUserAccounts[] = [];\n  appLogsNew:IAppLogs;\n\n  constructor(\n    private service: AuthorizationService,\n    private appLogsService: AppLogsService,\n    private formBuilder: FormBuilder,\n    private navigationApp:Router\n   \n  ) {\n    this.loginForm = this.formBuilder.group({\n      usernameInput: new FormControl(\"\", Validators.required),\n      passwordInput: new FormControl(\"\", Validators.required),\n    });\n    this.credentials = {password:'',username:''}\n    const dateSys = new Date();\n    this.appLogsNew = {\n     \n      eventType:\"Autenticacion\",\n      eventDescription:\"Intento de autenticacion en el app administrador por: \"+this.loginForm.get('usernameInput')?.value,\n      eventDate: `Year: ${dateSys.getDay}`\n  }\n \n  async GenerateAuth() {\n\n\n    this.appLogsService.PostAppLogs(this.appLogsNew).subscribe((result:any) =>{\n      console.log(result);\n    })\n\n   \n    this.credentials = {\n      username:this.loginForm.get('usernameInput')?.value,\n      password:this.loginForm.get('passwordInput')?.value\n    }\n    \n    this.service.PostAuthorization(this.credentials).subscribe(\n      (result: any) => {\n        this.payload.pop();\n        this.payload.push(result);\n       \n        localStorage.setItem('payload',JSON.stringify(this.payload))\n        switch(this.payload[0].jwt){\n          case \"USER NOT FOUND\":\n\n            alert(\"THIS USER WAS NOT FOUND OR YOU ENTER BAD CREDENTIALS! PLEASE TRY AGAIN\");\n            break;\n          case \"NO AUTHORIZED\":\n            alert(\"BAD CREDENTIALS OR USER ACCOUNT INACTIVE, PLEASE TRY AGAIN\");\n            break\n          default:\n           \n           \n            this.navigationApp.navigateByUrl('/Profile');\n          }\n      },\n      (error: HttpErrorResponse) => {\n        alert(error.error.error.message);\n      }\n    );\n  }\n\n  \n\n  ngOnInit(): void {\n    \n  }\n}\n","<div class=\"container bg-dark\">\n  <div class=\"row justify-content-center align-items-center vh-100\">\n    <div class=\"col-md-4\">\n      <div class=\"card\">\n        <div class=\"card-body\">\n          <h5 class=\"card-title mb-4\">Iniciar Sesión</h5>\n          <form [formGroup]=\"loginForm\" (ngSubmit)=\"GenerateAuth()\">\n            <div class=\"mb-3\">\n              <label for=\"username\" class=\"form-label\">Nombre de usuario</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"username\"\n                name=\"username\"\n                placeholder=\"Enter Username\"\n                formControlName=\"usernameInput\"\n                required=\"true\"\n              />\n            </div>\n            <div class=\"mb-3\">\n              <label for=\"password\" class=\"form-label\">Contraseña</label>\n              <input\n                type=\"password\"\n                class=\"form-control\"\n                id=\"password\"\n                name=\"password\"\n                placeholder=\"Enter Password\"\n                formControlName=\"passwordInput\"\n                required=\"true\"\n              />\n            </div>\n            <button type=\"submit\" class=\"btn btn-primary\" [disabled]=\"loginForm.invalid\">\n              Iniciar sesión\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n \n</div>\n"]},"metadata":{},"sourceType":"module"}